{"ast":null,"code":"import { useQuery, useMutation } from '@apollo/react-hooks';\nimport { GET_PORTFOLIOS, CREATE_PORTFOLIO, UPDATE_PORTFOLIO, DELETE_PORTFOLIO } from '../queries';\nexport const useGetPortfolio = () => useQuery(GET_PORTFOLIOS);\nexport const useUpdatePortfolio = () => useMutation(UPDATE_PORTFOLIO);\nexport const useDeletePortfolio = () => useMutation(DELETE_PORTFOLIO, {\n  update(cache, {\n    data: {\n      deletePortfolio\n    }\n  }) {\n    const {\n      portfolios\n    } = cache.readQuery({\n      query: GET_PORTFOLIOS\n    });\n    const newPortfolios = portfolios.filter(p => p._id !== deletePortfolio);\n    cache.writeQuery({\n      query: GET_PORTFOLIOS,\n      data: {\n        portfolios: newPortfolios\n      }\n    });\n  }\n\n});\nexport const useCreatePortfolio = () => useMutation(CREATE_PORTFOLIO, {\n  update(cache, {\n    data: {\n      createPortfolio\n    }\n  }) {\n    // get data from the cache\n    const {\n      portfolios\n    } = cache.readQuery({\n      query: GET_PORTFOLIOS\n    }); //write on the cache the same data with the new data that we create\n\n    cache.writeQuery({\n      query: GET_PORTFOLIOS,\n      data: {\n        portfolios: [...portfolios, createPortfolio]\n      }\n    });\n  }\n\n});","map":{"version":3,"sources":["C:/Users/meir/Documents/webDeveloppement/filip-udemy-nextjs/apollo/actions/index.js"],"names":["useQuery","useMutation","GET_PORTFOLIOS","CREATE_PORTFOLIO","UPDATE_PORTFOLIO","DELETE_PORTFOLIO","useGetPortfolio","useUpdatePortfolio","useDeletePortfolio","update","cache","data","deletePortfolio","portfolios","readQuery","query","newPortfolios","filter","p","_id","writeQuery","useCreatePortfolio","createPortfolio"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,QAAsC,qBAAtC;AACA,SACEC,cADF,EAEEC,gBAFF,EAGEC,gBAHF,EAIEC,gBAJF,QAI0B,YAJ1B;AAMA,OAAO,MAAMC,eAAe,GAAG,MAAMN,QAAQ,CAACE,cAAD,CAAtC;AACP,OAAO,MAAMK,kBAAkB,GAAG,MAAMN,WAAW,CAACG,gBAAD,CAA5C;AAGP,OAAO,MAAMI,kBAAkB,GAAG,MAAMP,WAAW,CAACI,gBAAD,EAAkB;AACnEI,EAAAA,MAAM,CAACC,KAAD,EAAQ;AAACC,IAAAA,IAAI,EAAE;AAACC,MAAAA;AAAD;AAAP,GAAR,EAAkC;AACtC,UAAM;AAACC,MAAAA;AAAD,QAAeH,KAAK,CAACI,SAAN,CAAgB;AAACC,MAAAA,KAAK,EAAGb;AAAT,KAAhB,CAArB;AACA,UAAMc,aAAa,GAAGH,UAAU,CAACI,MAAX,CAAkBC,CAAC,IAAGA,CAAC,CAACC,GAAF,KAAUP,eAAhC,CAAtB;AACAF,IAAAA,KAAK,CAACU,UAAN,CAAiB;AACfL,MAAAA,KAAK,EAACb,cADS;AAEfS,MAAAA,IAAI,EAAE;AAACE,QAAAA,UAAU,EAAEG;AAAb;AAFS,KAAjB;AAID;;AARkE,CAAlB,CAA5C;AAWP,OAAO,MAAMK,kBAAkB,GAAG,MAAMpB,WAAW,CAACE,gBAAD,EAAkB;AACnEM,EAAAA,MAAM,CAACC,KAAD,EAAQ;AAACC,IAAAA,IAAI,EAAG;AAACW,MAAAA;AAAD;AAAR,GAAR,EAAmC;AACvC;AACA,UAAM;AAACT,MAAAA;AAAD,QAAeH,KAAK,CAACI,SAAN,CAAgB;AAACC,MAAAA,KAAK,EAAGb;AAAT,KAAhB,CAArB,CAFuC,CAGvC;;AACAQ,IAAAA,KAAK,CAACU,UAAN,CAAiB;AACfL,MAAAA,KAAK,EAAEb,cADQ;AAEfS,MAAAA,IAAI,EAAE;AAACE,QAAAA,UAAU,EAAG,CAAC,GAAGA,UAAJ,EAAgBS,eAAhB;AAAd;AAFS,KAAjB;AAID;;AATkE,CAAlB,CAA5C","sourcesContent":["import { useQuery, useMutation } from '@apollo/react-hooks';\r\nimport {\r\n  GET_PORTFOLIOS,\r\n  CREATE_PORTFOLIO,\r\n  UPDATE_PORTFOLIO,\r\n  DELETE_PORTFOLIO } from '../queries';\r\n\r\nexport const useGetPortfolio = () => useQuery(GET_PORTFOLIOS)\r\nexport const useUpdatePortfolio = () => useMutation(UPDATE_PORTFOLIO)\r\n\r\n\r\nexport const useDeletePortfolio = () => useMutation(DELETE_PORTFOLIO,{\r\n  update(cache, {data: {deletePortfolio}}){\r\n    const {portfolios} = cache.readQuery({query : GET_PORTFOLIOS})\r\n    const newPortfolios = portfolios.filter(p=> p._id !== deletePortfolio)\r\n    cache.writeQuery({\r\n      query:GET_PORTFOLIOS,\r\n      data: {portfolios: newPortfolios}\r\n    })\r\n  }\r\n}\r\n  )\r\nexport const useCreatePortfolio = () => useMutation(CREATE_PORTFOLIO,{\r\n  update(cache, {data : {createPortfolio}}){\r\n    // get data from the cache\r\n    const {portfolios} = cache.readQuery({query : GET_PORTFOLIOS})\r\n    //write on the cache the same data with the new data that we create\r\n    cache.writeQuery({\r\n      query: GET_PORTFOLIOS,\r\n      data: {portfolios : [...portfolios, createPortfolio]}\r\n    })\r\n  }\r\n})\r\n"]},"metadata":{},"sourceType":"module"}